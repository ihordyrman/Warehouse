@model List<AccountDetailsViewModel>

@if (!Model.Any())
{
    <tr>
        <td colspan="7" class="px-6 py-12 text-center text-gray-500">
            <i class="fas fa-inbox text-4xl mb-2"></i>
            <p>No accounts found matching your criteria</p>
        </td>
    </tr>
}
else
{
    @foreach (AccountDetailsViewModel account in Model)
    {
        <tr class="hover:bg-gray-50 transition-colors">
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                    <div class="flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-exchange-alt text-blue-600"></i>
                    </div>
                    <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900">@account.Name</div>
                        <div class="text-sm text-gray-500">ID: @account.Id</div>
                    </div>
                </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full @(account.Type == "Live" ? "bg-blue-100 text-blue-800" : "bg-gray-100 text-gray-800")">
                    @account.Type
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span
                    class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full @(account.Enabled ? "bg-green-100 text-green-800" : "bg-red-100 text-red-800")">
                    @(account.Enabled ? "Enabled" : "Disabled")
                </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                @if (account.HasCredentials)
                {
                    <div class="flex items-center text-green-600">
                        <i class="fas fa-check-circle mr-1"></i>
                        <span class="text-sm">Configured</span>
                    </div>
                }
                else
                {
                    <div class="flex items-center text-yellow-600">
                        <i class="fas fa-exclamation-triangle mr-1"></i>
                        <span class="text-sm">Not Set</span>
                    </div>
                }
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900">@account.Balance.ToString("C")</div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                @(account.UpdatedAt == default ? "Never" : account.UpdatedAt.ToString("g"))
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <div class="flex justify-end space-x-3">
                    @* Toggle Button *@
                    <button type="button"
                            hx-post="/Accounts?handler=Toggle&amp;id=@account.Id&amp;enabled=@(!account.Enabled)"
                            hx-target="#accounts-table-body"
                            class="text-indigo-600 hover:text-indigo-900"
                            title="@(account.Enabled ? "Disable" : "Enable") account">
                        <i class="fas @(account.Enabled ? "fa-pause" : "fa-play")"></i>
                        <span class="sr-only">@(account.Enabled ? "Disable" : "Enable")</span>
                    </button>

                    <a href="/AccountsEdit?id=@account.Id"
                       class="text-blue-600 hover:text-blue-900 inline-flex items-center"
                       title="Edit account">
                        <i class="fas fa-edit mr-1"></i>
                        <span>Edit</span>
                    </a>

                    <a href="/AccountsDetails?id=@account.Id"
                       class="text-gray-600 hover:text-gray-900 inline-flex items-center"
                       title="View details">
                        <i class="fas fa-info-circle mr-1"></i>
                        <span>Details</span>
                    </a>

                    <button type="button"
                            hx-post="/Accounts?handler=Delete&amp;id=@account.Id"
                            hx-confirm="Are you sure you want to delete this account?"
                            hx-target="#accounts-table-body"
                            class="text-red-600 hover:text-red-900"
                            title="Delete account">
                        <i class="fas fa-trash"></i>
                        <span class="sr-only">Delete</span>
                    </button>
                </div>
            </td>
        </tr>
    }
}
